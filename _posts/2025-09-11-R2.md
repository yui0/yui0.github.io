---
layout: post
title: 🔑 Cloudflare R2 を NextCloud に接続する方法
tags: [Cloudflare,NextCloud,R2,AWS]
---

## 1️⃣ R2バケットを作成

1. [Cloudflare ダッシュボード](https://dash.cloudflare.com) にログイン
2. 左メニューから **「R2」** を選択
3. **「Create bucket」** をクリック
4. 任意の名前を入力して **「Create」**

これで R2 バケットができました 🎉

## 2️⃣ API トークンの発行

1. R2 メニュー右上の **「Manage R2 API Tokens」** をクリック
   ⚠️ Cloudflareの「ユーザAPIトークン」とは別物なので注意！
2. **「Create API Token」** をクリック
3. 権限は **「Admin Read & Write」** を選択
4. 発行された以下の情報をメモしておく✍️

   * **Access Key ID**
   * **Secret Access Key**
   * **Endpoint URL**
   * **Bucket名**

👉 この4つを NextCloud に設定します。

## 3️⃣ NextCloud 側で外部ストレージを有効化

1. NextCloudに管理者でログイン
2. 右上のユーザアイコン → **「アプリ」** → **「注目のアプリ」** から
   **「External storage support」** を有効化 ✅
   → これで外部ストレージ設定が可能に！

## 4️⃣ R2接続を設定する

1. **管理者設定 → 外部ストレージ** を開く

2. 新しいストレージを追加する

   * **フォルダ名**：好きな名前（例：R2）
   * **外部ストレージ**：`Amazon S3` を選択
   * **認証方法**：Access key
   * **バケット名**：先ほど作成したR2バケット名
   * **アクセスキーID**：メモした Access Key ID
   * **シークレットキー**：メモした Secret Access Key
   * **エンドポイント**：Cloudflare R2 のエンドポイントURL
     （例：`https://<accountid>.r2.cloudflarestorage.com`）
   * **リージョン**：空欄でもOK（任意）

3. 右端の ✅ チェックをクリック
   緑のマークが点灯すれば接続成功！🌟

## 5️⃣ 動作確認

* NextCloudのホーム画面に「R2」フォルダが表示される
* ファイルをアップロードしてみて、Cloudflare R2の管理画面で確認
  👉 両方に反映されていれば完璧✨

## 🎉 完成！

これで **NextCloud + Cloudflare R2** の連携が完了し、
容量無制限に近いマイ・クラウドが構築できます☁️💾
