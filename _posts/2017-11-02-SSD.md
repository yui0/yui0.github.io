---
layout: post
title: Mac ProでもSurface Proでもブート可能なLinuxを作る(EFI)
---

## 必要なもの

- SSDかUSBメモリー
  - 最低でもUSB3.1に対応している方がよい。転送速度は非常に重要。
  - 500GB以上あると使い勝手がよい。
- Mac Proの場合
  - wlドライバーを使う。(無線LAN)
    - http://www.broadcom.com/support/802.11
    - https://pmbs.links2linux.de/package/show/Essentials/broadcom-wl
- Surface Pro 3の場合
  - カーネルにパッチを当てる。[ここ](https://yui0.github.io/SurfacePro3Linux/)を参照。
  - 無線LANファームウェアをダウンロードする。git://git.marvell.com/mwifiex-firmware.gitから。

## パーティション(/dev/sdcの場合)

```
$ gdisk /dev/sdc
x
l
1
m
n
1
34
2047
ef02
x
l

m
n
2
2048
+100MB
ef00
w
y
```

```
$ gdisk /dev/sdc
n
3

+410G
0700
n
4

+10G
8300
n
5


8300
x
c
4
00000000-1994-0205-2002-424552525900
c
5
00000000-2014-1002-2002-424552525900
w
y
```

```bash
# mkfs.vfat /dev/sdc2 -n EFI
# mkfs.exfat /dev/sdc3 -n Samsung_T5
# mkfs.ext4 /dev/sdc4 -L BerryOS -U 00000000-1994-0205-2002-424552525900 -m 1
# mkfs.ext4 /dev/sdc5 -L BerryOS_Home -U 00000000-2014-1002-2002-424552525900
```

## 参考

- http://takuya-1st.hatenablog.jp/entry/2016/12/03/011022
- https://support.microsoft.com/ja-jp/help/4023511/surface-boot-surface-from-a-usb-device
- https://qiita.com/kiida/items/67bda4881fef5444fbe5
